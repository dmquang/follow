import requests
from time import sleep
import os
import random

os.system('cls')
luc = "\033[1;32m"
trang = "\033[1;37m"
red = "\033[1;31m"
yellow = "\033[0;93m"
lightblue = "\033[1;35m"
xduong = "\033[1;34m"
xnhac = "\033[1;36m"
hong = "\033[1;95m"

logo=f'''
    ▓█████▄  ▄▄▄       ██▀███   ██▓     ██▓ ███▄    █   ▄████ 
    ▒██▀ ██▌▒████▄    ▓██ ▒ ██▒▓██▒    ▓██▒ ██ ▀█   █  ██▒ ▀█▒  {red}BẢN QUYỀN: {yellow}ĐỒNG MINH QUANG (DARLING)
    ░██   █▌▒██  ▀█▄  ▓██ ░▄█ ▒▒██░    ▒██▒▓██  ▀█ ██▒▒██░▄▄▄░  {red}ZALO: {yellow}0372760208
    ░▓█▄   ▌░██▄▄▄▄██ ▒██▀▀█▄  ▒██░    ░██░▓██▒  ▐▌██▒░▓█  ██▓  {red}TOOL: {yellow}TEST_SEVER_FOLLOW_TRAODOISUB (TOOL_)
    ░▒████▓  ▓█   ▓██▒░██▓ ▒██▒░██████▒░██░▒██░   ▓██░░▒▓███▀▒  {red}DEV: {yellow}DARLING, MINH QUÂN, TUẤN ANH 
     ▒▒▓  ▒  ▒▒   ▓▒█░░ ▒▓ ░▒▓░░ ▒░▓  ░░▓  ░ ▒░   ▒ ▒  ░▒   ▒ 
     ░ ▒  ▒   ▒   ▒▒ ░  ░▒ ░ ▒░░ ░ ▒  ░ ▒ ░░ ░░   ░ ▒░  ░   ░ 
     ░ ░  ░   ░   ▒     ░░   ░   ░ ░    ▒ ░   ░   ░ ░ ░ ░   ░ 
       ░          ░  ░   ░         ░  ░ ░           ░       ░ 
     ░                                                                  
    '''
def log():
    print(logo)
log()
sleep(2)



token=input('token tds: ')
os.system('cls')
log()
cookies_string =input('cookie tiktok: ')
os.system('cls')
log()
ta =input('data_a: ')
os.system('cls')
log()
tb =input('data_b: ')
os.system('cls')
log()
tc =input('data_c: ')
os.system('cls')
log()
td =input('data_d: ')
os.system('cls')
log()
tf =input('data_f: ')
os.system('cls')
log()
tz =input('data_z: ')
os.system('cls')
log()

head_x = {
    'authority': 'www.tiktok.com',
    'accept': '*/*',
    'accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5',
    'cookie': cookies_string,
    'referer': 'https://www.tiktok.com/',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36',
    'x-secsdk-csrf-request': '1',
    'x-secsdk-csrf-version': '1.2.7'}

res = requests.head('https://www.tiktok.com/api/comment/publish/', headers=head_x).headers
x_secsdk_csrf_token=res['x-ware-csrf-token'].split(',')[1]
ttcsrftoken = cookies_string.split('tt_csrf_token=')[1].split(';')[0]
msToken=cookies_string.split('msToken=')[1].split(';')[0]
get_id=requests.get('https://www.tiktok.com/',headers={'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9','accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5','cookie': cookies_string,'sec-ch-ua': '".Not/A)Brand";v="99", "Google Chrome";v="103", "Chromium";v="103"','sec-ch-ua-mobile': '?0','sec-ch-ua-platform': '"Windows"','sec-fetch-dest': 'document','sec-fetch-mode': 'navigate','sec-fetch-site': 'none','sec-fetch-user': '?1','upgrade-insecure-requests': '1','user-agent': 'Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36'}).text
id_tiktok=get_id.split('"uid":"')[1].split('"}')[0]
head_id = {
'authority': 'www.tiktok.com',
'accept': '*/*',
'accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5',
'cookie': cookies_string,
'referer': 'https://www.tiktok.com/',
'sec-fetch-dest': 'empty',
'sec-fetch-mode': 'cors',
'sec-fetch-site': 'same-origin',
'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36',
'x-secsdk-csrf-request': '1',
'x-secsdk-csrf-version': '1.2.7'}

response = requests.head('https://www.tiktok.com/api/comment/publish/', headers=head_id).headers
#x_secsdk_csrf_token=response['x-ware-csrf-token'].split(',')[1]

#
cookies = {}
var_list = cookies_string.split(';')
var_list.pop()
for var in var_list:
    var_att = var.split('=')
    #print(var_att)
    cookies[var_att[0]] = var_att[1]
tt_csrf_token=cookies_string.split('tt_csrf_token=')[1].split(';')[0]
msToken=cookies_string.split('msToken=')[1].split(';')[0]
#

login=requests.get(f'https://traodoisub.com/api/?fields=profile&access_token={token}').json()
if 'success' in login:
    user=login['data']['user']
    coin=login['data']['xu']
    print(f'{xnhac}ACCOUNT  {red}</> {yellow}{user} \n{xnhac}COIN NOW {red}</> {yellow}{coin} ')
    print(f'{luc}[======================================]')

else:
    print(f'{red}TOKEN KHONG HOP LE!')
    print(f'{luc}[======================================]')
cauhinh = requests.get(f'https://traodoisub.com/api/?fields=tiktok_run&id={id_tiktok}&access_token={token}').json()
sleep(2)
while True:
    for loop in range(1,11):
        sleep(5)
        job=requests.get(f'https://traodoisub.com/api/?fields=tiktok_follow&access_token={token}').json()
        try:
            id = job['data'][0]['id']
            link = job['data'][0]['link']
            idjob=id.split('_')[0]
        except:
            print(f'{red}FINDING JOBS! PLEASE WAIT...',end='\r')
            continue
        headers = {
            'Accept': '*/*',
            'Accept-Language': 'vi,en;q=0.9,vi-VN;q=0.8,fr-FR;q=0.7,fr;q=0.6,en-US;q=0.5',
            'Connection': 'keep-alive',
            # 'Content-Length': '0',
            # Requests sorts cookies= alphabetically
            # 'Cookie': '_ttp=28unjjBFv07SKsZIPVib48W7OmI; passport_csrf_token=2972d1101b290fbc2f28b7c2bc4f791b; passport_csrf_token_default=2972d1101b290fbc2f28b7c2bc4f791b; tt_csrf_token=divdWYu1-wDKhP3UGlNoQEdd9AePUCYJDAvs; bm_sz=100EC0C1A3FC02259A950DE4ABD3F17E~YAAQzVFNG7Zf+0aCAQAAhbrYXhDS5XhqsCxz2hzdfVFq2baRv7wOvGpU1WsTW6dWCrU+29HcAbkKGMZmd7FEiKAjX9GTZJu4EJcwb8C9XYthohgQrJTnawUYDFNc3lAOKrwqbHh2f9ajMBvrS3KwXkGCaDHEiSrY+4ME9ssBZ9/ktAqM1u1AGzIlD1ZH7xWdxu2bi1NsKMqF3xZ2F2ZB+XHDnica/zpB8sbsHPXhoEUVl0NxKYAJmZqQTOgT+NwiLOCKp+0+BiYFFRe2jppEjjDs0M1Uus6gSH1I++NHdsrGwZo=~3622456~3749190; csrf_session_id=9f9044552b5047fe77b5b870833d2db8; s_v_web_id=verify_l6caplof_JQilcmzX_DsbG_4zW0_BM4B_Tr4eVi0VWyxX; ak_bmsc=EC79FFD39C78F69921136442A8A8D086~000000000000000000000000000000~YAAQxFFNGzeGeF6CAQAAHJRHXxC27DxMoAu5T+21gOqK3oAAfNbLva35Nto4Zbh1zogSsEGUgRWUFGWRXRr8I/ZP14dCQD6pA4woDExBTKaH+syHrJXICwWlAXLwFQjv2nvrffEXbwVps+GAsXnNommxCWDd8ulQWHyDvl4bU6HuvwGugs/OOwvx4WhKxuX841GqJnASwznrOhGdMhRMlJNTaYboTY5TvMi+bteZyMwB8fl1DNDp5H+cvtw7BhKYZS6ey9yKKM/fkVJynmQuQ+K0b/pbY7CxQ2rmXUQDxrfekcNcUZNnmgHVTCakFlm1HRw+wYdnjBQsvLt5jmUbpTGeLnx+x794NdKvlmRZhhYB1KbiCgmcFSzLqziwciUSvCwQamjTJPUtjoo=; _abck=CCD3B98955E0DD57450FF4E0F3AD1EF5~-1~YAAQxlFNG2fBVTaCAQAAJytRXwhqDwYy5ozc6rCxhyAA2YvLcSjhWIMoGj32xFtkJJKO+FZfHoKJOWxoa0pp7PRSD4RHCt9sEDx+CGhgfq1bqWJ4T5QSqjRNMlTmSFlxdkdGrOsWAu4PDOzFPmAos9N5dWVZTDqwT6hHR/Qzvm2qi27uTJ9KsPvlQ+56jMRCbMJHP1qhK7PIYExjECFw3fO+5vrJNsRj6tP+iP3pKDEuXYElDt1BMiGNFRb1oFCrkDXJBb0zZZtyNqMn2b/RXrTmkIncC9f4/R40hos7BLjfUNRP2W1EO6Nt6R2qzzNSbUXzHzO371/+WUUVySSLfu8JkVVrWzfYNn5boxmZmlqtu1H2to5u1DuwCTRKgCWEpM00/J0Opbh2fA==~-1~-1~-1; cmpl_token=AgQQAPOFF-RO0rFvm22hOR04-LAemTFW_4MOYMWdXA; sid_guard=577767bcc8043278b22c5dbfdb79f458%7C1659458412%7C5184000%7CSat%2C+01-Oct-2022+16%3A40%3A12+GMT; uid_tt=85a90f9d689747ba8ae7b2aba501c351ad8253c0087d5752cb95824ddd17d7dc; uid_tt_ss=85a90f9d689747ba8ae7b2aba501c351ad8253c0087d5752cb95824ddd17d7dc; sid_tt=577767bcc8043278b22c5dbfdb79f458; sessionid=577767bcc8043278b22c5dbfdb79f458; sessionid_ss=577767bcc8043278b22c5dbfdb79f458; sid_ucp_v1=1.0.0-KDYyMmIwZDgzNjMxZWE5MjM4MWM2ZDVlYzcxZDEyMDI5NGExZjE3ZjcKIAiBiK_IorndqGEQ7KallwYYswsgDDDgj8eKBjgHQPQHEAMaBm1hbGl2YSIgNTc3NzY3YmNjODA0MzI3OGIyMmM1ZGJmZGI3OWY0NTg; ssid_ucp_v1=1.0.0-KDYyMmIwZDgzNjMxZWE5MjM4MWM2ZDVlYzcxZDEyMDI5NGExZjE3ZjcKIAiBiK_IorndqGEQ7KallwYYswsgDDDgj8eKBjgHQPQHEAMaBm1hbGl2YSIgNTc3NzY3YmNjODA0MzI3OGIyMmM1ZGJmZGI3OWY0NTg; store-idc=useast2a; store-country-code=vn; tt-target-idc=alisg; odin_tt=19ca882c2a7f35100c45f9e2c7c2ebbb8744c9c5d2eaa82142f7d0e7a88c3b24044ce5bc3df2990e298b94d1c2ebe442ca5064c2aacf266599fdf74890a1878c1e1aff3d15db08d8abf90e48d06730b3; ttwid=1%7CUTcPouf-Z-DlWKY6uOwbu3o0yJrUuFPDKgppkXSSGkg%7C1659458418%7C4ac24ad5b97d1a99e84c3e4c68af01e9196b7f9207db8d63c76a15d4324c6f29; msToken=gMd00cw2s1qf-tR7nBVHVpCW5TGty6mE97Kb5zp49rvy_DdYKXEDJJgvF2dY4kZNHgbUB6jqzv6NRTbCh4dwRm73UfeIzogG8tPpUgoSuZo5-WB-iE_ihkgap89CFiqNDpctuszE; bm_sv=AD1903C00FEE29BA66FD5F68CA22E3FB~YAAQ3lFNG/VlT1uCAQAAHjBuXxBIuXhChtdOei1Iyeq/5z9TDaVu9w1C0nwwf60AbLpSjA2N/4Y4I5GS003nDV1nW/fxt+cPoAgXQ4LF5xM9wx8JjuioelFfioh3gOi3+dJgCIUve7GQwCU5OozUxN9+8N5WQ5QfEyYLQVZdhaWI79zRg6asOftdlQCpODdAvOy365ROw5jUeXCIONNUbxgqh7f/BqYVREZEkjrSiUHrpytB2suvkogIxuaxwX9CAA==~1',
            'Origin': 'https://www.tiktok.com',
            'Referer': 'https://www.tiktok.com/',
            'Sec-Fetch-Dest': 'empty',
            'Sec-Fetch-Mode': 'cors',
            'Sec-Fetch-Site': 'same-site',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36',
            'content-type': 'application/x-www-form-urlencoded',
            'hTc6j8Njvn-a': ta,
            'hTc6j8Njvn-b': tb,
            'hTc6j8Njvn-c': tc,
            'hTc6j8Njvn-d': td,
            'hTc6j8Njvn-f': tf,
            'hTc6j8Njvn-z': tz,
            'sec-ch-ua': '".Not/A)Brand";v="99", "Google Chrome";v="103", "Chromium";v="103"',
            'sec-ch-ua-mobile': '?0',
            'sec-ch-ua-platform': '"Windows"',
            'tt-csrf-token': ttcsrftoken,
            'x-secsdk-csrf-token': x_secsdk_csrf_token,
        }

        params = {
            'aid': '1988',
            'app_language': 'vi-VN',
            'app_name': 'tiktok_web',
            'battery_info': '1',
            'browser_language': 'vi',
            'browser_name': 'Mozilla',
            'browser_online': 'true',
            'browser_platform': 'Win32',
            'browser_version': '5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36',
            'channel': 'tiktok_web',
            'channel_id': '0',
            'cookie_enabled': 'true',
            'device_id': id_tiktok,
            'device_platform': 'web_pc',
            'focus_state': 'true',
            'from': '18',
            'fromWeb': '1',
            'from_page': 'user',
            'from_pre': '0',
            'history_len': '5',
            'is_fullscreen': 'false',
            'is_page_visible': 'true',
            'os': 'windows',
            'priority_region': 'VN',
            'referer': link,
            'region': 'VN',
            #'root_referer': 'https://www.tiktok.com/logout?redirect_url=https%3A%2F%2Fwww.tiktok.com%2F%40leslie7209743',
            'screen_height': '768',
            'screen_width': '1366',
            #'sec_user_id': 'MS4wLjABAAAAHCWCgGX8Sa_QyFnRUkLTu-vv01AIifXpc3BxaRz8Z2roHrQta6Bt_9sehgsWFsxB',
            'type': '1',
            'tz_name': 'Asia/Saigon',
            'user_id': idjob,
            #'verifyFp': 'verify_l6caplof_JQilcmzX_DsbG_4zW0_BM4B_Tr4eVi0VWyxX',
            'webcast_language': 'vi-VN',
            'msToken': msToken,
        }
        response = requests.post('https://t.tiktok.com/api/commit/follow/user/', params=params, cookies=cookies, headers=headers)
        print(f'[{str(loop)}] {red}FOLLOW {xnhac}</> {yellow}{link} {xnhac}</>')
        sleep(3)
        print(f'{red}WAIT...',end='\r')
        duyet=requests.get(f'https://traodoisub.com/api/coin/?type=TIKTOK_FOLLOW_CACHE&id={id}&access_token={token}')
        sleep(15)
    get=requests.get(f'https://traodoisub.com/api/coin/?type=TIKTOK_FOLLOW&id=TIKTOK_FOLLOW_API&access_token={token}').json()
    try:
        xu=get['data']['xu']
        msg=get['data']['msg']
        sc=get['data']['job_success']
        print(f'{trang}[{xduong}MQUANG{trang}] {red}JOBS SUCCESS {xnhac}</> {yellow}{sc} {xnhac}</> {yellow}{msg} {xnhac}</> {xnhac}NEW COIN {red}</> {yellow}{xu}')
        sleep(15)
    except:
        print(f'{red}',get)
        sleep(15)
    print(f'{luc}[======================================]')
    sleep(15)
